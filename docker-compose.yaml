version: "3.9"
services:
  app:
    build: .
    ports:
      - "8080:80"
    volumes:
      - ./mounts/proto:/usr/src/app/generated_proto
      - ./mounts/data:/usr/src/app/data
    depends_on:
      - nats-server
      
  #   volumes:
  #     - .:/code
  #     - logvolume01:/var/log
  #   links:
  #     - redis
  nats-server:
    image: nats
    ports:
      - "4222:4222"
      - "8222:8222"